<!DOCTYPE html>
<html>
<head>
	<!-- Favicons -->
        <link href="/images/GPREC.png" rel="icon" />
        <link href="/images/assets/img/apple-touch-icon.png" rel="apple-touch-icon" />
        <title>Create Quiz</title>
    <style>
        .page {
            font-family: Arial, sans-serif;
            background-color: #ffffff;
            margin-top: 1%;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #page-container {
            width: 80%;
            display: flex;
            justify-content: space-between;
            height: 80%;
        }

        .form-container {
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
            width: 500px;
            box-sizing: border-box;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 10px;
        }

        .form-label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .form-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin: 5px 0;
            box-sizing: border-box;
        }

        .form-input.question {
            padding: 10px;
            word-wrap: break-word;
        }

        .form-button-container {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }

        .form-button {
            flex: 1;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }

        .form-input:focus {
            border: 2px solid #007bff !important;
        }

        .form-button.add,
        .form-button.back {
            background-color: white;
            border: 2px solid black;
            color: black;
        }

        .form-button.add:hover {
            background-color: rgb(0, 0, 0);
            color: white;
        }

        .form-button.back:hover {
            background-color: black;
            color: white;
        }

        h2 {
            text-align: center;
            margin-top: 0%;
            margin-bottom: 0%;
        }
        
        .question-list {
            width: 50%; /* Adjust the width as needed */
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
          
            margin-left: 10px;
            margin-top:0px;
            padding: 20px;
            height: 490px;
             /* Set a fixed height for the question list */
    		overflow-y: auto;
        }
        
        .question-list::-webkit-scrollbar {
		  display: none;
		}
        
        .question-list .question-item {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            margin-bottom: 10px;
        }
        .empty-list-message {
			width:50%;
	        text-align: center;
	        margin-top: 20px;
	        color: #888; /* Adjust the color as needed */
            height: 10%;
	    }

    .question-item {
        border: 1px solid white;
        border-radius: 5px;
        padding: 10px;
        margin-bottom: 10px;
    }
  
    a {
		text-decoration: none;
	}
	
	row {
		margin-top: 20px;
		display: block;
	}
	.extra {
		width: 50%;
	    border: 2px solid #000; /* Add your desired border style */
	    padding: 10px; /* Add padding for better visual appearance */
	    border-radius: 5px; /* Optional: Add rounded corners */
	    display: inline-block; /* Ensures the border wraps around the content */
	    text-decoration: none;
	    margin-left: 25%;
	    text-align: center;
	    color: black; /* Set the text color */
	}
	
	.extra:hover {
	    background-color: #007bff; /* Add a background color on hover */
	    color: white; /* Change text color on hover */
	}
	body,
                h1 {
                    margin: 0;
                    padding: 0;
                }

                /* CSS Styles for your page */
                body {
                    font-family: Arial, sans-serif;
                    background-color: rgb(255, 255, 255);
                    margin: 0;
                    padding: 0;
                }

                h1 {
                    text-align: center;
                    color: #333;
                    margin-top: 20px;
                }

                table {
                    width: 80%;
                    margin: 20px auto;
                    border-collapse: collapse;
                    background-color: #fff;
                    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
                    overflow: hidden; /* Hide overflow content */
                    border-radius: 8px; /* Add some border radius */
                }

                th,
                td {
                    border: 1px solid #ccc;
                    padding: 12px; /* Increased padding for better spacing */
                    text-align: center;
                }

                th {
                    background-color: #333;
                    color: #fff;
                }

                tr:nth-child(even) {
                    background-color: #f2f2f2;
                }

                /* Smooth transition effect on hover */
                tr {
                    transition: background-color 0.3s;
                }

                /* Highlight even rows on hover */
                tr:nth-child(even):hover {
                    background-color: #ddd;
                }

                /* Highlight odd rows on hover */
                tr:nth-child(odd):hover {
                    background-color: #ccc;
                }

                #header {
                        transition: all 0.5s;
                        z-index: 997;
                        transition: all 0.5s;
                        padding: 15px 0;
                        background: rgba(255, 255, 255, 0.95);
                    }

                    #header.header-scrolled {
                        background: rgb(255, 255, 255);
                        box-shadow: 0px 2px 15px rgba(0, 0, 0, 0.1);
                    }

                    #header .logo h1 {
                        font-size: 30px;
                        margin: 0;
                        line-height: 1;
                        font-weight: 400;
                        letter-spacing: 2px;
                    }

                    #header .logo h1 a,
                    #header .logo h1 a:hover {
                        color: #5777ba;
                        text-decoration: none;
                    }

                    #header .logo img {
                        margin: 0;
                        max-height: 40px;
                    }

                    /*--------------------------------------------------------------
        # Navigation Menu
        --------------------------------------------------------------*/
                    /**
        * Desktop Navigation
        */
                    .navbar {
                        padding: 0;
                        position: relative;
                    }

                    .navbar ul {
                        margin: 0;
                        padding: 0;
                        display: flex;
                        list-style: none;
                        align-items: center;
                    }

                    .navbar li {
                        position: relative;
                    }

                    .navbar a,
                    .navbar a:focus {
                        display: flex;
                        align-items: center;
                        justify-content: space-between;
                        padding: 10px 0 10px 30px;
                        font-family: "Raleway", sans-serif;
                        font-size: 15px;
                        color: #47536e;
                        white-space: nowrap;
                        transition: 0.3s;
                    }

                    .navbar a i,
                    .navbar a:focus i {
                        font-size: 12px;
                        line-height: 0;
                        margin-left: 5px;
                    }

                    .navbar a:hover,
                    .navbar .active,
                    .navbar .active:focus,
                    .navbar li:hover > a {
                        color: #5777ba;
                    }

                    #but {
                        color: white;
                    }

                    .navbar .getstarted,
                    .navbar .getstarted:focus {
                        background: #5777ba;
                        color: #fff;
                        padding: 12px 25px;
                        margin-left: 30px;
                        color: #fff;
                        line-height: 1;
                        border-radius: 50px;
                    }

                    .navbar .getstarted:hover,
                    .navbar .getstarted:focus:hover {
                        background: #748ec6;
                        color: #fff;
                    }
                    /**
        * Mobile Navigation
        */
                    .mobile-nav-toggle {
                        color: #47536e;
                        font-size: 28px;
                        cursor: pointer;
                        display: none;
                        line-height: 0;
                        transition: 0.5s;
                    }

                    .mobile-nav-toggle.bi-x {
                        color: #fff;
                    }

                    @media (max-width: 991px) {
                        .mobile-nav-toggle {
                            display: block;
                        }

                        .navbar ul {
                            display: none;
                        }
                    }

                    .navbar-mobile {
                        position: fixed;
                        overflow: hidden;
                        top: 0;
                        right: 0;
                        left: 0;
                        bottom: 0;
                        background: rgba(51, 60, 79, 0.9);
                        transition: 0.3s;
                        z-index: 999;
                    }

                    .navbar-mobile .mobile-nav-toggle {
                        position: absolute;
                        top: 15px;
                        right: 15px;
                    }

                    .navbar-mobile ul {
                        display: block;
                        position: absolute;
                        top: 55px;
                        right: 15px;
                        bottom: 15px;
                        left: 15px;
                        padding: 10px 0;
                        border-radius: 6px;
                        background-color: #fff;
                        overflow-y: auto;
                        transition: 0.3s;
                    }

                    .navbar-mobile a,
                    .navbar-mobile a:focus {
                        padding: 10px 20px;
                        font-size: 15px;
                        color: #47536e;
                    }

                    .navbar-mobile a:hover,
                    .navbar-mobile .active,
                    .navbar-mobile li:hover > a {
                        color: #5777ba;
                    }

                    .navbar-mobile .getstarted,
                    .navbar-mobile .getstarted:focus {
                        margin: 15px;
                    }

                    .container {
                        max-width: 960px;
                        width: 48%;
                        box-sizing: border-box;
                        display: flex;
                        margin-left: 6%;
                        margin-right: 2%;
                    }

                    #navbar {
                        margin-left: 100%;
                        }

                    .row{
                        height: 80%;
                    }

    
    </style>
    <link href="/images/assets/css/style.css" rel="stylesheet" />
</head>
<body>
	<header id="header" class="fixed-top header-transparent">
            <div
                class="container d-flex align-items-center justify-content-between"
            >
                <div class="logo">
                    <!--<h1><a href="index.html">GPREC QUIZ</a></h1> -->
                    <!-- Uncomment below if you prefer to use an image logo -->
                    <a th:href="@{/admin-page}"
                        ><img
                            src="/images/logo.png"
                            alt=""
                            class="img-fluid"
                    /></a>
                </div>

                 <nav id="navbar" class="navbar">
                    <ul>
                        <li>
                            <a
                                class="nav-link scrollto active"
                                th:href="@{/admin-page}"
                                >Home</a
                            >
                        </li>

                        <li>
                            <a
                                class="nav-link scrollto active"
                                th:href="@{/admin-page/noticeboard}"
                                >Noticeboard</a
                            >
                        </li>

                        <li>
                            <a
                                class="nav-link scrollto active"
                                th:href="@{/admin-page/finalreport}"
                                >Results</a
                            >
                        </li>

                        <li>
                            <a class="getstarted scrollto" th:href="@{/logout}"
                                >Logout</a
                            >
                        </li>
                    </ul>
                    <i class="bi bi-list mobile-nav-toggle"></i>
                </nav>

                <!-- .navbar -->
            </div>
            </header>
 	<div class="page">
		<div id="page-container">
			<div class="row">
		    <div class="form-container">
		        <h2>Add Question</h2>
		        <form id="question-form" th:method="post" th:action="@{/admin-page/addd}" th:object="${questionsForm}">
		            <div class="form-group">
		                <input type="text" th:field="*{questionTitle}" class="form-input question" id="questionTitle" placeholder="Enter the question" name="questionTitle" required></input>
		            </div>
		            <div class "form-group">
		                <label class="form-label" for="option1"></label>
		                <input th:field="*{option1}" class="form-input" type="text" id="option1" placeholder="Option 1" name="option1" required>
		            </div>
		            <div class="form-group">
		                <label class="form-label" for="option2"></label>
		                <input th:field="*{option2}" class="form-input" type="text" id="option2" placeholder="Option 2" name="option2" required>
		            </div>
		            <div class="form-group">
		                <label class="form-label" for="option3"></label>
		                <input th:field="*{option3}" class="form-input" type="text" id="option3" placeholder="Option 3" name="option3" required>
		            </div>
		            <div class="form-group">
		                <label class="form-label" for="option4"></label>
		                <input th:field="*{option4}" class="form-input" type="text" id="option4" placeholder="Option 4" name="option4" required>
		            </div>
		            <div class="form-group">
		                <label class="form-label" for="rightAnswer"></label>
		                <input th:field="*{rightAnswer}" class="form-input" type="text" id="rightAnswer" name="rightAnswer" placeholder="Enter the correct answer" required>
		            </div>
		            <div class="form-button-container">
		                
		                <button class="form-button add" type="submit">Add Question</button>
		                
		            </div>
		        </form>
		        
		    </div>
			<div class="subm">
				    <a class="extra" id="su" th:href="@{/admin-page}">Submit & Back</a>
			</div>
		    </div>
			<div class="question-list" th:if="${not #lists.isEmpty(allquestions)}">
		            <h2>Questions for [[${detail.getSection()}]] Section and Quiz Id : <span th:text="${category}"></span></h2>
		             <div th:each="question, questionIndex : ${allquestions}" class="question-item" id="question-${question.id}">
		        		    <form th:action="@{/admin-page/delete-question}" th:method="post">
				        	<input type="hidden" name="questionId" th:value="${question.id}" />	
				        		<p th:text="'Question ' + ${questionIndex.index + 1} + ': ' + ${question.questionTitle}"></p>
				        		
				                <ol>
				                    <li th:text="${question.option1}"></li>
				                    <li th:text="${question.option2}"></li>
				                    <li th:text="${question.option3}"></li>
				                    <li th:text="${question.option4}"></li>
				                </ol>
				                <p th:text="'Correct Answer : '+${question.rightAnswer}"></p>
				                <!-- Display other question details as needed -->
				                 <button class="form-button delete" type="submit">Delete</button>
				            </form>
		            </div>
		        </div>
		        <div th:if="${#lists.isEmpty(allquestions)}" class="empty-list-message">
		    		<p>No questions added.</p>
				</div>
		</div>
	</div>
</body>
<script>
    $(document).ready(function () {
        $('.delete-form').submit(function (e) {
            e.preventDefault();

            var form = $(this);
            var url = form.attr('action');
            var questionId = form.find('input[name="questionId"]').val();

            $.ajax({
                type: 'POST',
                url: url,
                data: { questionId: questionId },
                success: function (data) {
                    // Handle success (e.g., remove the deleted question from the UI)
                    $('#question-' + questionId).remove();
                },
                error: function (error) {
                    console.error('Error deleting question:', error);
                }
            });
        });
    });
</script>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>


</html>